import{_ as Q,s as $,j as L,f as x,h as R,k as z,B as H,T as M,l as h,c as B,b as n,w as o,r as s,o as _,d as J,F as K,g as O,i as w,a as r,t as k,u as D,m as U,p as P,e as W,n as S,q as g,G as X,A as j,Q as Z,U as ee}from"./index-932304bf.js";const te=p=>(P("data-v-da42fce5"),p=p(),W(),p),ae={class:"dialy"},ne=te(()=>r("h1",null,"日々のつぶやき",-1)),oe={class:"buttons"},le={__name:"Dialy",setup(p){const{user:f}=$(L()),c=x(!1),a=R({id:null,title:"",content:"",date:""});let C=x([]);z(async()=>{await m()});const m=async()=>{c.value=!0;try{const t=await H(M(h,"dialy"));let e=[];t.forEach(i=>{const{title:d,content:y,date:u}=i.data();e.push({id:i.id,title:d,content:y,date:u})}),C.value=e}catch(t){console.log(t)}finally{c.value=!1}},I=async()=>{try{c.value=!0,await V(h,a),await m()}catch(t){console.log(t),S.error("投稿に失敗しました")}finally{q(),c.value=!1}},N=t=>{a.id=t.id,a.title=t.title,a.content=t.content,a.date=g(t.date)},T=async t=>{console.log(t);try{await X(j(h,"dialy",t)),await m()}catch(e){console.log(e),S.error("削除に失敗しました")}},V=async(t,e)=>{console.log(e),e.id?await ee(j(t,"dialy",e.id),{title:e.title,content:e.content,created:g(e.date).format("YYYY-MM-DD"),author_uid:f.value.uid}):await Z(M(t,"dialy"),{title:e.title,content:e.content,date:g(e.date).format("YYYY-MM-DD"),author_uid:f.value.uid})},q=()=>{a.id=null,a.title="",a.content="",a.date=""};return(t,e)=>{const i=s("a-input"),d=s("a-form-item"),y=s("a-date-picker"),u=s("a-col"),A=s("a-button"),v=s("a-row"),E=s("a-form"),Y=s("a-card"),b=s("font-awesome-icon"),F=s("a-spin");return _(),B("div",ae,[ne,n(v,{justify:"center"},{default:o(()=>[n(u,{span:12},{default:o(()=>[n(Y,null,{default:o(()=>[n(E,{model:a,layout:"vertical"},{default:o(()=>[n(d,{label:"タイトル"},{default:o(()=>[n(i,{value:a.title,"onUpdate:value":e[0]||(e[0]=l=>a.title=l)},null,8,["value"])]),_:1}),n(d,{label:"内容"},{default:o(()=>[n(i,{value:a.content,"onUpdate:value":e[1]||(e[1]=l=>a.content=l)},null,8,["value"])]),_:1}),n(v,{justify:"center",gutter:12},{default:o(()=>[n(u,{span:12},{default:o(()=>[n(d,{label:"Date"},{default:o(()=>[n(y,{style:{width:"100%"},value:a.date,"onUpdate:value":e[2]||(e[2]=l=>a.date=l)},null,8,["value"])]),_:1})]),_:1}),n(u,{span:12,style:{display:"flex","align-items":"center"}},{default:o(()=>[n(A,{type:"primary",shape:"round",onClick:I,style:{width:"100%"}},{default:o(()=>[J("投稿")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),n(v,{class:"dialies",gutter:[0,16]},{default:o(()=>[n(F,{spinning:c.value},{default:o(()=>[(_(!0),B(K,null,O(D(C),l=>(_(),w(Y,{class:"cus-card"},{default:o(()=>[r("h3",null,k(l.title),1),r("span",null,k(l.date),1),r("p",null,k(l.content),1),r("div",oe,[D(f)?(_(),w(b,{key:0,icon:"fa-solid fa-pen-to-square",onClick:G=>N(l)},null,8,["onClick"])):U("",!0),D(f)?(_(),w(b,{key:1,icon:"fa-solid fa-trash",onClick:G=>T(l.id)},null,8,["onClick"])):U("",!0)])]),_:2},1024))),256))]),_:1},8,["spinning"])]),_:1})])}}},ce=Q(le,[["__scopeId","data-v-da42fce5"]]);export{ce as default};
